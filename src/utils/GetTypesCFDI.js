const _0x1f8d89=_0x29b6;(function(_0x54de1d,_0x4fd8e3){const _0x3b7dc9=_0x29b6,_0x5e375e=_0x54de1d();while(!![]){try{const _0x2a740e=parseInt(_0x3b7dc9(0x7f))/0x1*(-parseInt(_0x3b7dc9(0xa6))/0x2)+-parseInt(_0x3b7dc9(0xa4))/0x3+-parseInt(_0x3b7dc9(0x87))/0x4+parseInt(_0x3b7dc9(0x93))/0x5+parseInt(_0x3b7dc9(0x98))/0x6*(parseInt(_0x3b7dc9(0x83))/0x7)+parseInt(_0x3b7dc9(0xb0))/0x8+parseInt(_0x3b7dc9(0x81))/0x9*(-parseInt(_0x3b7dc9(0xa5))/0xa);if(_0x2a740e===_0x4fd8e3)break;else _0x5e375e['push'](_0x5e375e['shift']());}catch(_0x116ee8){_0x5e375e['push'](_0x5e375e['shift']());}}}(_0x5dcc,0xdf3af));function _0x5dcc(){const _0x69c032=['axios','env','API_SECRET','-01-01&documentTypes=CFDI&cfdiType=CREDIT_NOTE','Error\x20al\x20enviar\x20notificacion:\x20','get','\x20eliminado\x20por\x20ser\x20ya\x20timbrado','Error\x20executing\x20query:\x20','3526467QVzXNM','1798910eHaWsC','226kZuKKF','Error\x20al\x20obtener\x20el\x20tipo\x20de\x20comprobante\x20\x22P\x22\x20:\x20\x0a','.env.credentials.focaltec','getMonth','&createdFrom=','UUID\x20','-01-01&documentTypes=CFDI&cfdiType=PAYMENT_CFDI','TENANT_ID','NREG','getDate','14562688lyofTT','Error\x20al\x20obtener\x20el\x20tipo\x20de\x20comprobante\x20\x22E\x22\x20:\x20\x0a','No\x20hay\x20CFDI\x20de\x20tipo\x20I','rfc','SELECT\x20COUNT(*)\x20AS\x20NREG\x20FROM\x20APIBH\x20H,\x20APIBHO\x20O\x20WHERE\x20H.CNTBTCH\x20=\x20O.CNTBTCH\x20AND\x20H.CNTITEM\x20=\x20O.CNTITEM\x20AND\x20H.ERRENTRY\x20=\x200\x20AND\x20O.OPTFIELD\x20=\x20\x27FOLIOCFD\x27\x20AND\x20[VALUE]\x20=\x20\x27','exports','cfdi','notify','push','node-notifier','7822wcfoPX','getFullYear','9GzEiDq','./SQLServerConnection','3395035uewBcp','-01-01&documentTypes=CFDI&cfdiType=INVOICE&stage=PENDING_TO_PAY','uuid','No\x20hay\x20CFDI\x20de\x20tipo\x20P','2230984GfGpPB','\x20eliminado\x20por\x20falta\x20de\x20RFCReceptor\x20en\x20fesa','data','URL','/public/img/cerrar.png','receptor','Error\x20al\x20obtener\x20el\x20tipo\x20de\x20comprobante\x20\x22I\x22\x20:\x20\x0a','recordset','cwd','split','log','/cfdis?createdUntil=','7030110cqZhGk','/api/1.0/extern/tenants/','Focaltec','timbre','config','6fqvkko','\x20conservado','items','SELECT\x20COUNT(*)\x20AS\x20NREG\x20FROM\x20fesaParam\x20WHERE\x20Parametro\x20=\x20\x27RFCReceptor\x27\x20AND\x20VALOR\x20=\x20\x27'];_0x5dcc=function(){return _0x69c032;};return _0x5dcc();}const notifier=require(_0x1f8d89(0xb9));require('dotenv')[_0x1f8d89(0x97)]({'path':_0x1f8d89(0xa8)});const axios=require(_0x1f8d89(0x9c)),{runQuery}=require(_0x1f8d89(0x82)),url=process[_0x1f8d89(0x9d)][_0x1f8d89(0x8a)],tenantIds=[],apiKeys=[],apiSecrets=[],databases=[],tenantIdValues=process[_0x1f8d89(0x9d)][_0x1f8d89(0xad)][_0x1f8d89(0x90)](','),apiKeyValues=process['env']['API_KEY'][_0x1f8d89(0x90)](','),apiSecretValues=process['env'][_0x1f8d89(0x9e)][_0x1f8d89(0x90)](','),databaseValues=process['env']['DATABASES'][_0x1f8d89(0x90)](',');tenantIds[_0x1f8d89(0xb8)](...tenantIdValues),apiKeys['push'](...apiKeyValues),apiSecrets[_0x1f8d89(0xb8)](...apiSecretValues),databases[_0x1f8d89(0xb8)](...databaseValues);function _0x29b6(_0x46fa28,_0x242a23){const _0x5dccba=_0x5dcc();return _0x29b6=function(_0x29b67f,_0x133e03){_0x29b67f=_0x29b67f-0x7f;let _0x463e78=_0x5dccba[_0x29b67f];return _0x463e78;},_0x29b6(_0x46fa28,_0x242a23);}async function getTypeP(_0x30b144){const _0x6f10a8=_0x1f8d89;let _0xd511d4=new Date()[_0x6f10a8(0xaf)](),_0x46fa4a=new Date()['getMonth']()+0x1,_0x91983a=new Date()['getFullYear']();try{const _0x393fab=await axios['get'](url+_0x6f10a8(0x94)+tenantIds[_0x30b144]+_0x6f10a8(0x92)+_0x91983a+'-'+_0x46fa4a+'-'+_0xd511d4+_0x6f10a8(0xaa)+_0x91983a+_0x6f10a8(0xac),{'headers':{'PDPTenantKey':apiKeys[_0x30b144],'PDPTenantSecret':apiSecrets[_0x30b144]}});if(_0x393fab[_0x6f10a8(0x89)]['total']===0x0)return console['log'](_0x6f10a8(0x86)),[];const _0x3ccf12=[];for(const _0x97ea97 of _0x393fab[_0x6f10a8(0x89)][_0x6f10a8(0x9a)]){const _0x29bd35='SELECT\x20COUNT(*)\x20AS\x20NREG\x20FROM\x20fesaParam\x20WHERE\x20Parametro\x20=\x20\x27RFCReceptor\x27\x20AND\x20VALOR\x20=\x20\x27'+_0x97ea97[_0x6f10a8(0xb6)][_0x6f10a8(0x8c)][_0x6f10a8(0xb3)]+'\x27;';try{const _0x55af34=await runQuery(_0x29bd35);if(_0x55af34[_0x6f10a8(0x8e)][0x0]['NREG']===0x0){console[_0x6f10a8(0x91)](_0x6f10a8(0xab)+_0x97ea97[_0x6f10a8(0xb6)][_0x6f10a8(0x96)][_0x6f10a8(0x85)]+_0x6f10a8(0x88));continue;}const _0x19feba=_0x6f10a8(0xb4)+_0x97ea97[_0x6f10a8(0xb6)][_0x6f10a8(0x96)][_0x6f10a8(0x85)]+'\x27;',_0x8b6265=await runQuery(_0x19feba,databases[_0x30b144]);if(_0x8b6265[_0x6f10a8(0x8e)][0x0][_0x6f10a8(0xae)]>0x0){console['log'](_0x6f10a8(0xab)+_0x97ea97['cfdi'][_0x6f10a8(0x96)]['uuid']+'\x20eliminado\x20por\x20ser\x20ya\x20timbrado');continue;}console[_0x6f10a8(0x91)](_0x6f10a8(0xab)+_0x97ea97[_0x6f10a8(0xb6)]['timbre']['uuid']+_0x6f10a8(0x99)),_0x3ccf12[_0x6f10a8(0xb8)](_0x97ea97);}catch(_0x3c6c0b){console['log']('Error\x20executing\x20query:\x20'+_0x3c6c0b);}}return _0x3ccf12;}catch(_0x2bffc1){try{notifier[_0x6f10a8(0xb7)]({'title':_0x6f10a8(0x95),'message':_0x6f10a8(0xa7)+_0x2bffc1+'\x0a','sound':!![],'wait':!![],'icon':process[_0x6f10a8(0x8f)]()+_0x6f10a8(0x8b)});}catch(_0x526817){console[_0x6f10a8(0x91)](_0x6f10a8(0xa0)+_0x526817),console[_0x6f10a8(0x91)](_0x6f10a8(0xa7)+_0x2bffc1+'\x0a');}return[];}}async function getTypeI(_0x141441){const _0x17e20=_0x1f8d89;let _0x1de51a=new Date()[_0x17e20(0xaf)](),_0xfc6a34=new Date()[_0x17e20(0xa9)]()+0x1,_0x5a248d=new Date()['getFullYear']();try{const _0x42cb67=await axios['get'](url+'/api/1.0/extern/tenants/'+tenantIds[_0x141441]+_0x17e20(0x92)+_0x5a248d+'-'+_0xfc6a34+'-'+_0x1de51a+_0x17e20(0xaa)+_0x5a248d+_0x17e20(0x84),{'headers':{'PDPTenantKey':apiKeys[_0x141441],'PDPTenantSecret':apiSecrets[_0x141441]}});if(_0x42cb67['data']['total']===0x0)return console['log'](_0x17e20(0xb2)),[];const _0x1aa6e1=[];for(const _0x392b0b of _0x42cb67['data'][_0x17e20(0x9a)]){const _0x39ed15=_0x17e20(0x9b)+_0x392b0b['cfdi'][_0x17e20(0x8c)][_0x17e20(0xb3)]+'\x27;';try{const _0x145881=await runQuery(_0x39ed15);if(_0x145881[_0x17e20(0x8e)][0x0]['NREG']===0x0){console[_0x17e20(0x91)](_0x17e20(0xab)+_0x392b0b[_0x17e20(0xb6)]['timbre'][_0x17e20(0x85)]+_0x17e20(0x88));continue;}const _0x42938a=_0x17e20(0xb4)+_0x392b0b[_0x17e20(0xb6)][_0x17e20(0x96)]['uuid']+'\x27;',_0x2d796e=await runQuery(_0x42938a,databases[_0x141441]);if(_0x2d796e[_0x17e20(0x8e)][0x0][_0x17e20(0xae)]>0x0){console[_0x17e20(0x91)](_0x17e20(0xab)+_0x392b0b[_0x17e20(0xb6)][_0x17e20(0x96)][_0x17e20(0x85)]+_0x17e20(0xa2));continue;}console[_0x17e20(0x91)]('UUID\x20'+_0x392b0b[_0x17e20(0xb6)][_0x17e20(0x96)]['uuid']+_0x17e20(0x99)),_0x1aa6e1[_0x17e20(0xb8)](_0x392b0b);}catch(_0x4602f0){console[_0x17e20(0x91)](_0x17e20(0xa3)+_0x4602f0);}}return _0x1aa6e1;}catch(_0x36d1af){try{notifier[_0x17e20(0xb7)]({'title':_0x17e20(0x95),'message':_0x17e20(0x8d)+_0x36d1af+'\x0a','sound':!![],'wait':!![],'icon':process[_0x17e20(0x8f)]()+_0x17e20(0x8b)});}catch(_0x45c091){console['log'](_0x17e20(0xa0)+_0x45c091),console[_0x17e20(0x91)](_0x17e20(0x8d)+_0x36d1af+'\x0a');}return[];}}async function getTypeE(_0x4033ad){const _0x1b152f=_0x1f8d89;let _0x3d959e=new Date()[_0x1b152f(0xaf)](),_0x161366=new Date()[_0x1b152f(0xa9)]()+0x1,_0x34a8b6=new Date()[_0x1b152f(0x80)]();try{const _0x46449b=await axios[_0x1b152f(0xa1)](url+_0x1b152f(0x94)+tenantIds[_0x4033ad]+_0x1b152f(0x92)+_0x34a8b6+'-'+_0x161366+'-'+_0x3d959e+'&createdFrom='+_0x34a8b6+_0x1b152f(0x9f),{'headers':{'PDPTenantKey':apiKeys[_0x4033ad],'PDPTenantSecret':apiSecrets[_0x4033ad]}});if(_0x46449b[_0x1b152f(0x89)]['total']===0x0)return console[_0x1b152f(0x91)]('No\x20hay\x20CFDI\x20de\x20tipo\x20E'),[];const _0x26665c=[];for(const _0x158709 of _0x46449b[_0x1b152f(0x89)][_0x1b152f(0x9a)]){const _0x1eeb44=_0x1b152f(0x9b)+_0x158709[_0x1b152f(0xb6)][_0x1b152f(0x8c)]['rfc']+'\x27;';try{const _0x3c5768=await runQuery(_0x1eeb44);if(_0x3c5768[_0x1b152f(0x8e)][0x0][_0x1b152f(0xae)]===0x0){console[_0x1b152f(0x91)](_0x1b152f(0xab)+_0x158709[_0x1b152f(0xb6)][_0x1b152f(0x96)][_0x1b152f(0x85)]+_0x1b152f(0x88));continue;}const _0x2e143b=_0x1b152f(0xb4)+_0x158709[_0x1b152f(0xb6)][_0x1b152f(0x96)][_0x1b152f(0x85)]+'\x27;',_0x54ada2=await runQuery(_0x2e143b,databases[_0x4033ad]);if(_0x54ada2[_0x1b152f(0x8e)][0x0][_0x1b152f(0xae)]>0x0){console['log']('UUID\x20'+_0x158709[_0x1b152f(0xb6)]['timbre'][_0x1b152f(0x85)]+'\x20eliminado\x20por\x20ser\x20ya\x20timbrado');continue;}console['log'](_0x1b152f(0xab)+_0x158709['cfdi']['timbre'][_0x1b152f(0x85)]+_0x1b152f(0x99)),_0x26665c[_0x1b152f(0xb8)](_0x158709);}catch(_0x1b5de6){console[_0x1b152f(0x91)](_0x1b152f(0xa3)+_0x1b5de6);}}return _0x26665c;}catch(_0x3c4e68){try{notifier[_0x1b152f(0xb7)]({'title':_0x1b152f(0x95),'message':_0x1b152f(0xb1)+_0x3c4e68+'\x0a','sound':!![],'wait':!![],'icon':process[_0x1b152f(0x8f)]()+_0x1b152f(0x8b)});}catch(_0x596f2a){console[_0x1b152f(0x91)](_0x1b152f(0xa0)+_0x596f2a),console[_0x1b152f(0x91)](_0x1b152f(0xb1)+_0x3c4e68+'\x0a');}return[];}}module[_0x1f8d89(0xb5)]={'getTypeP':getTypeP,'getTypeI':getTypeI,'getTypeE':getTypeE};